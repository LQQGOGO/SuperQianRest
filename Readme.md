# 项目开发文档

## 一.项目概述

* 项目名称：钱宝咩咩餐
* 项目简介：本项目是一个点餐程序的管理端，供商家管理订单，菜品，用户等信息，提升餐饮管理的效率
* 开发周期：2025.3.1——2025.4.30
* 技术栈：
  * 前端： React19 + Ant Design + ECharts
  * 后端：Node.js + Express 
  * 数据库： MySQL

## 二.核心模块与技术要点

### 1.用户登录模块

* 整体逻辑

引入`AntDesign`的表单组件，添加输入校验规则，点击登录按钮提交信息表单，登录成功后跳转首页，登录失败则进行信息提示

* 技术要点

  * 封装`request`工具

    下载`axios`包，在`utils`文件夹中封装`request`工具，里面包含了：

    1. 请求的基本配置项，如请求基地址和超时时间
    2. 请求拦截器，在请求头上添加`token`和对返回错误进行响应
    3. 响应拦截器，对请求返回的结果进行处理

  * 使用`Redux`管理`token`

    安装`Redux`相关工具包，在`store`文件夹下进行仓库的配置，其中不同的信息放在不同的仓库下管理，通过`index`文件统一导出。在用户信息仓库中，添加了`token`数据和`setToken`同步修改方法，利用这两者接着封装了异步修改方法设置`token`，通过提交表单数据，再将返回的`token`存入仓库中

  * `token`持久化

    封装`token`本地存取方法，然后在请求响应拦截器中注入`token`

  * 路由鉴权

    封装 `AuthRoute` 路由鉴权高阶组件，判断本地是否有`token`，如果有，就返回子组件，如果没有，实现未登录拦截，并跳转到登录页面。将首页的路由配置替换为`AuthRoute` 组件渲染

### 2.首页模块

引入了`Layout`组件实现基础的布局，然后在`sider`部分中使用`menu`组件来实现菜单的展示，最后添加点击跳转来实现菜单功能。在顶部添加了几个功能按钮，如折叠侧边栏，刷新页面以及消息通知标识。内容区域添加二级路由出口进行内容展示

* 技术要点

  * 动态添加`tabs`标签导航

    通过路由跳转记录用户的足迹，通过`tabs`标签在顶部实时展现，随时可以返回到已经浏览过的页面

  * 刷新页面不丢失浏览记录

    将点击过的菜单保存到`sessionStorage`中，每次初始化先从`sessionStorage`获取浏览记录，用`tabs`标签来展示

  * 侧边栏响应式大小变化

    在小屏幕的时候折叠侧边栏时，控制侧边栏偏移到视口之外实现侧边栏完全消失，展开时覆盖在内容上，同时添加遮罩层覆盖内容，防止误触。在大屏幕时，折叠侧边栏会保留菜单图标来展示内容，展开时内容收缩，便于展示

### 3.用户模块

实现了以列表形式展现用户信息，并且实现了分页展示，每一个列表项的末尾添加了编辑和删除的功能按钮，在列表顶部有新建用户的功能和通过邮箱查找用户的功能

* 技术要点

  * 模糊搜索以及防抖

    通过在用户邮箱信息中过滤匹配目标值的邮箱，同时用`useCallback`和防抖函数包装搜索逻辑，减少因为函数创建导致的不必要的性能开销

### 4.菜单模块

根据分类展示菜品，可以对菜品信息进行修改，也可以添加菜品和删除菜品，同时对菜单分类也可以进行修改，当分类下有菜品时将无法删除该分类

### 5.订单模块

根据订单状态，分类为未接单，制作中和已完成三种进行展示，对不同状态的订单可以进行相应的操作，如未接单对应接单，制作中对应完成，已完成对应删除。对于每个订单项可以点击查看详情，里面展示了用户具体的订单内容

### 6.销售数据模块

这里展示了四种销售数据：以数字形式展示的总销售额和订单数，以折线图形式展示每一天的销售额和订单数，以柱形图形式展示的各个分类下菜品的销售额和订单量，热门菜品以词云形式展示

* 技术要点

  * 图表展示

    这里需要根据需求将销售数据统计好之后返回给前端，然后引入EChart图表库。这里是将每种图表都封装成了组件，可以根据不同的数据进行展示

### 7.监控页

能监控实时在线人数，定时刷新，数字能跳动变化

* 技术要点

  * 数字动画变化

    通过动画开始的时间和持续时间，实时计算动画的进度，然后将当前计算到的数字返回，在动画结束前一直递归调用，以此实现数字的跳动变化